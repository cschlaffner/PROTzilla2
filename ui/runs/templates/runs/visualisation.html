{% extends 'base.html' %}
{% load static %}

{% block js %}
{#    <script type="text/javascript" src="{% static 'js/cytoscape-3.24.0.min.js' %}"></script>#}
{#    <script type="text/javascript" src="{% static 'js/cytoscape-dagre.js' %}"></script>#}
{#    <script type="text/javascript" src="{% static 'js/cytoscape-klay.js' %}"></script>#}
{#    <script type="text/javascript" src="{% static 'js/klay-2.js' %}"></script>#}
{#    <script type="text/javascript" src="{% static 'js/cytoscape-fcose.js' %}"></script>#}
{% endblock %}

{% block content %}
    <style>
        #cy {
            height: 1080px;
            width: 1920px;
        }
    </style>
    <div id="cy"></div>
    <script type="module"> //type="module"
        import cytoscape from "/cytoscape";
        import cytoscapeKlay from '/cytoscape-klay';

        document.addEventListener('DOMContentLoaded', function () {
            console.log("cytoscape")
            cytoscape.use(cytoscapeKlay);
            var cy = cytoscape({
                container: document.getElementById('cy'),
                elements: {{ elements|safe }},
                layout: {
                    name: 'cose',
                    {#idealEdgeLength: 100,#}
                    {#nodeOverlap: 20,#}
                    {#refresh: 20,#}
                    {#fit: true,#}
                    {#padding: 30,#}
                    {#randomize: false,#}
                    {#componentSpacing: 100,#}
                    {#nodeRepulsion: 400000,#}
                    {#edgeElasticity: 100,#}
                    {#nestingFactor: 5,#}
                    {#gravity: 80,#}
                    {#numIter: 1000,#}
                    {#initialTemp: 200,#}
                    {#coolingFactor: 0.95,#}
                    {#minTemp: 1.0#}
                },
                style: [
                    {
                        selector: 'node',
                        style: {
                            'label': 'data(label)', // Use the 'label' attribute for node labels
                            'text-valign': 'center',
                            'text-halign': 'center',
                            'background-color': 'lightblue', // Example node style
                            'width': '60px',
                            'height': '60px'
                        }
                    },
                    {
                        selector: 'edge',
                        style: {
                            'width': 2,
                            'line-color': '#ccc',
                            'target-arrow-color': '#ccc',
                            'target-arrow-shape': 'triangle'
                        }
                    }
                ]
            });
        });
    </script>

{% endblock %}
